## Design System Rules

- Tokens come from Figma Variables via MCP and are written to `src/figma-variables.css` under `:root`.
- Use a generated block delimited by `/* BEGIN: generated by figma-mcp */` and `/* END: generated by figma-mcp */`.
- Name tokens in kebab-case: `color/brand/primary` → `--color-brand-primary`.
- Colors: hex when opaque, `rgb(r g b / a)` when alpha < 1. Numbers use `px` unless typography opts for `rem`.
- Consume tokens via `var(--token-name)` in CSS.
- Theme: Only light mode is implemented; do not implement or ship dark mode.

Key files:

- `src/index.tsx` (routes), `src/renderer.tsx` (HTML shell), `src/style.css` (global), `src/figma-variables.css` (generated tokens).

Workflow:

1. Select node in Figma → fetch variables via MCP.
2. Convert names to CSS custom properties.
3. Write inside generated block in `src/figma-variables.css`.
4. Avoid editing generated lines by hand; add overrides below.

Component styling & conventions:

- Use CSS Modules for component styles. Example: `src/components/Button.module.css`.
- Use cva with module class names, not global strings:
  - Base: `styles.button`
  - Variants: `styles["button--primary"]`, `styles["button--md"]`, etc.
- Do not link component CSS globally in `renderer`. Only link `src/style.css` and `src/figma-variables.css`.
- Re-export public components from `src/components/index.ts`.
- Include React primitive HTML props on components and merge with variants.
  - Example: `Button` extends `React.ButtonHTMLAttributes<HTMLButtonElement>` in `ButtonProps` alongside `VariantProps`.
- Do not use Tailwind in this project.
- Whenever a new component is generated from Figma, update `src/components/Home.tsx` so the Home showcase reflects the latest components.

Alias normalization after variable fetch:

- Figma MCP returns resolved values, not alias links. After writing variables, remap semantic tokens to primitives when values match.
- Current remaps (examples):
  - `--bg-emphasis` → `var(--bg-secondary)`
  - `--bg-input` → `var(--bg-popover)`
  - `--bg-popover-hover` → `var(--bg-secondary)`
  - `--bg-primary-hover` → `var(--neutral-700)`
  - `--border-brand` → `var(--bg-brand)`
  - `--border-secondary` → `var(--bg-secondary)`
  - `--fg-danger` → `var(--bg-destructive)`
  - `--fg-default` → `var(--neutral-950)`
  - `--fg-subtle` → `var(--neutral-400)`
    // Add more mappings as appropriate when new primitives are present.
